---
show: step
version: 1.0 
---


## 挑战 MySQL 实例应用开发

#### 介绍
应用系统中在操作过程中会记录各种操作日志，如操作类型、操作时间、备注等信息。对这类数据存储进行设计，并使用 MySQL 实例进行操作这些日志数据。

#### 目标

1）使用 MySQL 实例创建数据库及分区表；  
2）在 MySQL 实例中对分区表进行数据操作，如插入、查询、更新、删除操作；  
3）在 MySQL 实例中创建索引及查看执行计划；  

#### 提示
1）使用垂直分区、水平分区存储数据；  
2）现在 SequoiaDB 中创建集合，然后在 MySQL 实例中映射创建的集合；  
3）MySQL 实例中DDL需要使用sequoiadb_execute_only_in_mysql参数；  

#### 参考答案
1）主表使用时间字段分区，子表使用主键分区，如主表分区字段createtime，子表分区字段logid；
2）MySQL 实例中映射表有主键字段，并且自增，如主键字段为logid INT AUTO_INCREMENT PRIMARY KEY；
3）在 MySQL 实例中根据时间字段查询及显示查询计划，如查询语句：select * from tablename where createtime > begintime and createtime < endtime,查看执行计划explain select * from tablename where createtime > begintime and createtime < endtime；

## 挑战 SparkSQL 实例应用开发

#### 介绍
应用系统中在操作过程中会记录各种操作日志，如操作类型、操作时间、备注等信息。对这类数据存储进行设计，并使用 SparkSQL 统计分析 各操作类型的频度。

#### 目标

1）在 SparkSQL 实例中映射 SequoiaDB 中的集合空间、集合；  
2）使用 SparkSQL 实例查询数据，查询条件中需带时间条件；  

#### 提示
1）使用垂直分区、水平分区存储数据；  
2）现在 SequoiaDB 中创建集合，然后在 SparkSQL 实例中映射创建的集合；  

#### 参考答案
1）主表使用时间字段分区，子表使用主键分区，参考《挑战 MySQL实例应用开发》；
3）在 SparkSQL 实例中根据时间字段对查询类型 type 字段进行统计，如查询语句：select type,count(type) from tablename where createtime > begintime and createtime < endtime group by type；
