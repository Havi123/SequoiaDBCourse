

# 考试

## 挑战介绍

S3 对象存储部署与开发

#### 知识点

使用S3对象存储;

## 挑战内容

1)SequoiaDB开启RC级别事务，且配置为等锁模式;
2)创建S3专属域domain1,并在config/application.properties进行相应配置
3)启动S3

## 挑战要求

正确配置并启动S3

## 示例代码

sdb
var db = new Sdb ("localhost", 11810) ;
db.updateConf ( { transactionon : true , transisolation : 1 ,  translockwait : true } ) ;
db.createDomain("domain1", ["datagroup"], { AutoSplit : true } ) ;

sudo vim /opt/sequoiadb/tools/sequoias3/config/application.properties
server.port=8002
sdbs3.sequoiadb.url=sequoiadb://localhost:11810
sdbs3.sequoiadb.meta.domain=domain1

/opt/sequoiadb/tools/sequoias3/sequoias3.sh start


## 挑战介绍

NFS文件系统部署与开发

#### 知识点

NFS文件系统的使用

## 挑战内容

1) 创建挂载点 /opt/sequoiafs/mountpoint;
2) 创建sequoiafs的配置文件目录(/opt/sequoiafs/conf/fscs_fscl/001/)和日志目录(/opt/sequoiafs/log/fscs_fscl/001/);
3) 创建一个空配置文件/opt/sequoiafs/conf/fscs_fscl/001/sequoiafs.conf;
4) 启动sequoiafs服务;
5) 用sdb的list(4)命令查看sfs相关的表并grep到控制台中;
6) 在mount目录创建fsdir目录,输入hello 到fsfile.txt;
7) 查看数据库是否将fsdir配置上去;


## 示例代码

mkdir -p /opt/sequoiadb/mountpoint
mkdir -p /opt/sequoiafs/conf/foo_bar/001/
mkdir -p /opt/sequoiafs/log/foo_bar/001/
touch /opt/sequoiafs/conf/foo_bar/001/sequoiafs.conf

sequoiafs /opt/sequoiafs/mountpoint -i localhost:11810 -l fscs.fscl --autocreate -c /opt/sequoiafs/conf/fscs_fscl/001/ --diagpath  /opt/sequoiafs/log/fscs_fscl/001/ -o big_writes -o max_write=131072 -o max_read=131072


sdb 'db = new Sdb("localhost",11810)'
sdb 'db.list(4)'|grep sequoiafs

cd /opt/sequoiafs/mountpoint/fsdir
echo 'hello, this is a fsfile!' >> fsfile.txt

sdb 'db.sequoiafs.bar_dir148139183721030.find()' ---集合为list出来的,不一样
