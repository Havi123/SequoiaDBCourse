# MySQL实例管理

## 挑战介绍
在实际的生产环境中，因为业务发展的需要，数据库的数据往往需要进行迁移到其它的库进行存储。同时本地的库也需要进行数据的备份等操作。

#### 知识点

1）创建 MySQL 高可用实例 ;  
2）使用存储过程构造1000条数据 ;  
3）对数据存储的表进行 CSV 格式迁移 ;  
4）对数据进行备份 ;  

## 挑战内容

1）使用垂直分区、水平分区存储数据 ；  
2）现在 SequoiaDB 中创建集合，然后在 MySQL 实例中映射创建的集合；  
3）MySQL的实例需要是高可用 ；

## 挑战要求
1）主表使用时间字段分区，子表使用主键分区，如主表分区字段createtime，子表分区字段logid；
2）MySQL 实例中映射表有主键字段；
3）迁移操作命令：

## 示例代码

```shell
# csv 导出
SELECT * FROM employee   
INTO OUTFILE '/tmp/employee_export.csv'   
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '"'
LINES TERMINATED BY '\r\n';

# csv 导入
LOAD DATA INFILE '/tmp/employee_export.csv'
INTO TABLE employee_import_test
FIELDS TERMINATED BY ','
OPTIONALLY ENCLOSED BY '"'
ESCAPED BY '"'
LINES TERMINATED BY '\r\n'; 
```

4）备份操作命令
```
/opt/sequoiasql/mysql/bin/mysqldump -h 127.0.0.1 -u root -proot  company employee_import_test > /tmp/employee_import_test.sql
```
