---
show: step
version: 1.0
enable_checker: true
---

# 安装目录详解

## 课程介绍

本课程存储集群和数据库实例的安装目录及其子目录下的各个主要文件的内容。

#### 请点击右侧选择使用的实验环境

#### 部署架构：
本课程中 SequoiaDB 巨杉数据库的集群拓扑结构为三分区单副本，其中包括：1个 SequoiaSQL-MySQL 数据库实例节点、1个引擎协调节点，1个编目节点与3个数据节点。

![图片描述](https://doc.shiyanlou.com/courses/1469/1207281/8d88e6faed223a26fcdc66fa2ef8d3c5)

详细了解 SequoiaDB 巨杉数据库系统架构：
* [SequoiaDB 系统架构](http://doc.sequoiadb.com/cn/sequoiadb-cat_id-1519649201-edition_id-0)

#### 实验环境
课程使用的实验环境为 Ubuntu Linux 16.04 64 位版本。SequoiaDB 数据库引擎以及 SequoiaSQL-MySQL 实例均为 3.4 版本。



## 切换用户及查看数据库版本

#### 切换到 sdbadmin 用户

部署 SequoiaDB 巨杉数据库和 SequoiaSQL-MySQL 实例的操作系统用户为 sdbadmin。
```
su - sdbadmin
```
>Note:
>
>用户 sdbadmin 的密码为 sdbadmin

#### 查看巨杉数据库版本

查看 SequoiaDB 巨杉数据库引擎版本

```
sequoiadb --version
```
操作截图：

![图片描述](https://doc.shiyanlou.com/courses/1469/1207281/b4082b0d6d6bdf89d229aa713a53759d)

## 查看节点启动列表

查看 SequoiaDB 巨杉数据库引擎节点列表

```
sdblist 
```

操作截图：

![图片描述](https://doc.shiyanlou.com/courses/1469/1207281/02fcaa58ac27e91688ead137fa748d6e)

>Note:
>
>如果显示的节点数量与预期不符，请稍等初始化完成并重试该步骤


## 创建数据库及数据表

进入 MySQL shell ，连接 SequoiaSQL-MySQL 实例并创建 company 数据库实例，为接下来验证 MySQL 语法特性做准备。

#### 登录 MySQL shell 

```
/opt/sequoiasql/mysql/bin/mysql -h 127.0.0.1 -P 3306 -u root
```

#### 创建数据库实例

```sql
CREATE DATABASE company ;
USE company ;
```

#### 创建数据表
在 SequoiaSQL-MySQL 实例中创建的表将会默认使用 SequoiaDB 数据库存储引擎，包含主键或唯一键的表将会默认以唯一键作为分区键，进行自动分区。


1）创建包含自增主键字段的 employee 表；

```sql
CREATE TABLE employee (empno INT AUTO_INCREMENT PRIMARY KEY, ename VARCHAR(128), age INT) ;
```

2）数据写入操作；
```sql
INSERT INTO employee (ename, age) VALUES ("Jacky", 36) ;
INSERT INTO employee (ename, age) VALUES ("Alice", 18) ;
```

操作截图：
![上传一个文件](https://doc.shiyanlou.com/courses/1480/1207281/8736e149874126bab578f8e55e0b8d37)

3）查看sdb安装目录及其子目录下的各个文件；
```
quit
cd /opt/sequoiadb/
ls
ls conf/local
ls conf/local/11810
ls hadoop/
ls spark/
ls python/
ls plugins/
ls tools/
ls tools/dr_ha/
ls database
ls database/data/
ls database/data/11830/
```

操作截图：
![sdb安装目录说明](https://doc.shiyanlou.com/courses/1480/1207281/49cac07142c2f7be41cec91783439189)

- SequoiaDB 巨杉数据库的安装目录是 /opt/sequoiadb
- conf/local 目录下存放节点配置信息，例如 conf/local/11810 下有个 sdb.conf ，里面存放节点11810的配置信息
- hadoop和spark这两个目录下是使用sparkSQL用到的jar包
- python目录下是使用python的驱动包
- plugins目录下是使用到的插件
- tools目录下是工具，例如tools/dr_ha目录下是集群分割和合并的工具
- database目录下存放节点数据，有三个子目录：cata对应编目节点，coord对应协调节点，data对应数据节点。每个子目录里面都有一些文件夹，archivelog对应归档日志，diaglog对应诊断信息，bakfile是默认的备份文件存放路径，replicalog存放同步日志。testdb.1.data和testdb.1.idx存放上一步创建的testdb库的数据和索引信息，foo.1.data，foo.1.idx，foo.1.lobd对应集合空间foo的数据，索引，以及lob信息（因为上一步往该集合空间中上传了一个文件）。



## 查看MYSQL安装目录及其子目录下的各个文件
```
ls /opt/sequoiasql/mysql/
ls /opt/sequoiasql/mysql/bin/
ls /opt/sequoiasql/mysql/tools/
ls /opt/sequoiasql/mysql/share/
```
操作截图：
![mysql安装目录详解](https://doc.shiyanlou.com/courses/1480/1207281/fa4388d1e703c008dc71797c35073751)

- MySQL 实例的安装路径是/opt/sequoiasql/mysql/
- bin子目录下是关于mysql的可执行文件
- tools子目录下是关于mysql的工具，例如实例同步工具
- share子目录下是一些常用的SQL文件以及语言包

## 查看PG安装目录及其子目录下的各个文件
```
ls /opt/sequoiasql/postgresql
ls /opt/sequoiasql/postgresql/conf
ls /opt/sequoiasql/postgresql/share/
ls /opt/sequoiasql/postgresql/conf/instance/myinst.conf
more /opt/sequoiasql/postgresql/conf/instance/myinst.conf
```

操作截图：
![postgre安装目录详解](https://doc.shiyanlou.com/courses/1480/1207281/f7fc021085680aaceb419845d0c13625)

- PostgreSQL 实例的安装路径是/opt/sequoiasql/postgresql/
- bin子目录下是关于postgresql的可执行文件
- share子目录下是一些常用的SQL文件
- conf子目录下是一些配置信息，例如conf/instance/myinst.conf里面记录了PGDATA和PGLOG的存放路径



## 总结

Sequoiadb是一个分布式数据库，可以存储海量的结构化和非结构化数据，并提供多种接口实例，以方便应用程序的访问。本课程简单介绍了存储集群和数据库实例的安装目录及其子目录下的各个主要文件的内容。

