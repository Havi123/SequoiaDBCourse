## 挑战一

完成集群的备份恢复操作，存储引擎的数据操作，快照和监控。

## 挑战介绍

使用数据库备份还原数据库是人为或者无法避免的灾难时提供数据恢复最小代价的最优方案。

本挑战通过数据库的备份恢复等操作对数据库备份及集群知识查漏补缺。

#### 知识点

数据库的备份

## 挑战内容

1) 创建集合空间 company 然后在此集合空间创建集合 employee 并写入记录( id : 10001, name : 'SequoiaDBer1', age : 48 )。

2) 创建集合空间 company2 然后在此集合空间创建集合 employee2 并写入记录( id : 10002, name : 'SequoiaDBer2', age : 21 )。

3) 执行全量备份命令，数据备份到目录( /opt/sequoiadb/tmp )，要求备份路径要使用通配符 %g 。

4) 删除集合空间 company2 。

5) 执行增量备份命令，数据备份到目录( /opt/sequoiadb/tmp )要求备份路径要使用通配符 %g 。

6) 停止集群，把所有节点恢复至全量备份时的状态。
>Note:
>
>参考命令：sdbrestore -p /opt/sequoiadb/tmp/group3/ -n full -b 0 -i 0
>
> - -p 备份源数据所在路径。
> - -n 需要恢复的备份名。
> - -b 需要从第几次备份开始恢复，从 0 开始算起，缺省由系统自动计算 ( -1 )。
> - -i 需要恢复到第几次数据备份，从 0 开始算起，缺省恢复到最后一次 ( -1 )。

7) 启动集群，用snapshot( SDB_SNAP_CATALOG )查看该表编目信息。

## 挑战要求

1）完成全量备份和增量备份。

2）把所有节点恢复到全量备份时的状态

## 挑战二 

完成集群的扩容

## 挑战介绍

随着数据量的不断增长，集群难免会遇到数据存储的容量问题和整个集群的性能问题，此时需要进行集群扩容来提升集群性能及增加数据存储空间。

本挑战通过创建新的数据组并增加新节点来完成集群的扩容。

#### 知识点
集群扩容

## 挑战内容
1) 创建一个新的数据组，命名为group4。

2) 在 group4 上创建 1 个数据节点副本，节点端口号为 11850 ，数据文件路径为( /opt/sequoiadb/database/data/11850/ )
>Note:
>
>参考命令：rg.createNode( 主机名, 节点端口号, 数据文件路径 )
## 挑战要求

1）新增数据组

2）往新增的数据组添加新的数据节点副本


<!--
挑战1

一、
db.createCS("company");
db.createCS("company2");
db.company.createCL("employee");
db.company2.createCL("employee2");

db.company.employee.insert({id : 10001, name : 'SequoiaDBer1', age : 48})
db.company2.employee2.insert({id : 10002, name : 'SequoiaDBer2', age : 21})

二、
db.backup ( { Name : "fullback", Path : "/opt/sequoiadb/tmp/%g", Overwrite : true, Description : "full backup" } ) ; 

三、
db.dropCS("company")

四、
db.backup ( { Name : "fullback", Path : "/opt/sequoiadb/tmp/%g", EnsureInc : true } ) ;

五、
sdbstop -t all 

sdbrestore -p /opt/sequoiadb/tmp/SYSCatalogGroup/ -n fullback -b 0 -i 0
sdbrestore -p /opt/sequoiadb/tmp/group1/ -n fullback -b 0 -i 0
sdbrestore -p /opt/sequoiadb/tmp/group2/ -n fullback -b 0 -i 0
sdbrestore -p /opt/sequoiadb/tmp/group3/ -n fullback -b 0 -i 0

六、
sdbstart -t all 


挑战2

db.createRG ( "group4" ) ;

db.getRG ( "group4" ).createNode ( "yourhostname", 11850, "/opt/sequoiadb/database/data/11850/" ) ; 



-->